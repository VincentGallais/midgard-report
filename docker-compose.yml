services:
  midgard-deal-report:
    image: midgard/deal-report:latest
    container_name: midgard-deal-report
    networks:
      - midgard-network
    restart: always
    ports:
      - 10002:8080
    environment:
      - POSTGRES_PRIMARY=midgard-postgres
      - POSTGRES_USER=postgres
      - POSTGRES_PWD=postgres
      - POSTGRES_DB=midgard-deal-report
      - ARGINE_URL=http://argine:3000
    secrets:
      - GOOGLE_APPLICATION_CREDENTIALS

secrets:
  GOOGLE_APPLICATION_CREDENTIALS:
    file: ./gcp_credentials.json

networks:
  midgard-network:
    external: true
    name: argineNetwork
